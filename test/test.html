<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Display images using JQuery</title>
  <script type="text/javascript" src="../js/jquery-2.2.1.min.js"></script>
  <script type="text/javascript" src="../js/lazysizes.min.js" async=""></script>
  <script type='text/javascript' src='../js/endless.min.js'></script>
  <script type='text/javascript' src='../js/jquery.mousewheel.min.js'></script>

  <script type="text/javascript" src="../js/main.js"></script>
  <script type="text/javascript" src="../js/jquery.lazyload.min.js"></script>

  <link href="../css/reset.css" rel="stylesheet">
  <link href="../css/style.css" rel="stylesheet">
  <script>
  $(document).ready(function() {
    //Mouswheel
    var multiplier = 20;
    var container =  $('.container');

    $('#lightgallery').endless({
      direction:'horizontal',
      scrollbar:'enabled'
    });

    container.mousewheel(function(e){
      container.scrollLeft(container.scrollLeft()-e.deltaY*multiplier);
      e.preventDefault();
    });

    var timeout;

    function loop_next(){
      timeout = window.setTimeout(function() {
        container.scrollLeft(container.scrollLeft() + 2);
        loop_next();
      }, 20);
    }
    function loop_prev(){
      timeout = window.setTimeout(function() {
        container.scrollLeft(container.scrollLeft() - 2);
        loop_prev();
      }, 20);
    }
    function stop(){
      window.clearTimeout(timeout);
    }

    $(".left-arr").hover(loop_prev, stop);
    $(".right-arr").hover(loop_next, stop);
  });
  /**
  Init
  */
  function init() {
    var projects;
    loadConfig('../test/test.json').done(function(response) { //is returned as deffered object
      projects = response.projects;
      var imgObj = '[';
      for(var i = 0; i < projects.length; i++) {
        var id = projects[i].n;
        for(var n = 0; n < projects[i].pics.length; n++) {
          var ident = id + i;
          createGalleryItem(ident, projects[i].pics[n]);
        }
      }

      var totalWidth = 0;
      $('#lightgallery').children().each(function(){
        totalWidth += $(this).outerWidth();
      });
      $('#lightgallery').css('width', totalWidth);

    });

  }
  </script>
</head>

<!-- Don't forget the init funcion to be called onload -->
<body onload="init()">
<div class="container">
  <div id="lightgallery">
  </div>
</div>
  <noscript>
    <p>Javascript is not supported in this browser</p>
  </noscript>
  <script>

  </script>
</body>
</html>
