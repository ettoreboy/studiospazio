<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8" />
  <title>Display images using JQuery</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>

  <script type="text/javascript" src="../js/main.js"></script>
  <script type="text/javascript" src="../js/jquery.lazyload.min.js"></script>
  <script type="text/javascript" src="../js/jquery.scrollstop.min.js"></script>

  <link href="../css/reset.css" rel="stylesheet">
  <link href="../css/style.css" rel="stylesheet">
  <script>

  $(window).load(function() {
    // Animate loader off screen
    $(".se-pre-con").fadeOut("slow");

    //Infinite scroll loop
    if (document.documentElement.clientWidth + $(window).scrollLeft() >= $(document).width()) {
        $(document).scrollLeft(0);
    } else if ($(window).scrollLeft() < 0) {
        $(document).scrollLeft($(document).width());
    }

    var totalWidth = 0;
      $('#lightgallery').children().each(function(){
        totalWidth += $(this).outerWidth();
      });
      $('#lightgallery').css('width', totalWidth);

    //Lazy load
    $(function() {
        $("img.lazy").lazyload({
            effect : "fadeIn"
        });
    });
  });
   /**
   Init
   */
   function init() {
    var projects;
      loadConfig('../test/test.json').done(function(response) { //is returned as deffered object
        projects = response.projects;
        console.log(projects);
        var imgObj = '[';
        for(var i = 0; i < projects.length; i++) {
          var id = projects[i].n;
            for(var n = 0; n < projects[i].pics.length; n++) {
            //loadImage(id + n, projects[i].pics[n], '.content');
              var ident = id + i;
              createGalleryItem(ident, projects[i].pics[n]);
               imgObj = imgObj + '{"src":\''+ projects[i].pics[n] +'\'},';
            }
        }

        imgObj = imgObj.substring(0, imgObj.length - 1) +']';
        console.log(imgObj);


    });

    //loadImage("../images/test.jpg", 800, 600, '.content');
   }
  </script>
</head>

 <!-- Don't forget the init funcion to be called onload -->
 <body onload="init()">
   <div id="" class="se-pre-con" ></div>

    <div id="lightgallery">
    </div>

    <noscript>
        <p>Javascript is not supported in this browser</p>
    </noscript>
 </body>
</html>
