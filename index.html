<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Studiospazio</title>
    <script type="text/javascript" src="js/jquery-2.2.1.min.js"></script>

    <script type='text/javascript' src='js/lazysizes.min.js'></script>
    <script type='text/javascript' src='js/jquery.mousewheel.min.js'></script>

    <script type="text/javascript" src="js/main.js"></script>

    <link href="css/reset.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script>
    $(document).ready(function() {

      var projects;
      loadConfig('config.json').done(function(response) { //is returned as deffered object
        projects = response.projects;

        for(var i = 0; i < projects.length; i++) {
          var id = projects[i].n;
          for(var n = 0; n < projects[i].pics.length; n++) {
            var ident = id + i;
            createGalleryItem(ident, projects[i].pics[n]);
          }
        }

      }).done(function(){
        var totalWidth = 0;
        $('.img-resp').each(function(){
          totalWidth += $(this).width;
        });
        $('#lightgallery').css('width', totalWidth);
        $('.container').css('width', totalWidth);

      });
      //Mouswheel
      var multiplier = 20;
      var container =  $('.container');

      container.mousewheel(function(e){
        container.scrollLeft(container.scrollLeft()-e.deltaY*multiplier);
        e.preventDefault();
      });

      var timeout;

      function loop_next(){
        timeout = window.setTimeout(function() {
          container.scrollLeft(container.scrollLeft() + 2);
          loop_next();
        }, 20);
      }
      function loop_prev(){
        timeout = window.setTimeout(function() {
          container.scrollLeft(container.scrollLeft() - 2);
          loop_prev();
        }, 20);
      }
      function stop(){
        window.clearTimeout(timeout);
      }

      $(".left-arr").hover(loop_prev, stop);
      $(".right-arr").hover(loop_next, stop);
    });

    </script>
  </head>

  <!-- Don't forget the init function to be called onload -->
  <body>
    <!-- Navigation arrows -->
    <div class="arr left-arr"> < </div>
    <div class="arr right-arr"> > </div>

  <div class="container">
    <div id="lightgallery">
    </div>
  </div>
    <noscript>
      <p>Javascript is not supported in this browser</p>
    </noscript>
    <script>

    </script>
  </body>
  </html>
